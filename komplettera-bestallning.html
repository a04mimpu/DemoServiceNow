!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Komplettera beställning</title>
</head>
<body>
  <h1>Komplettera beställning</h1>
  <label>Produktkategori:</label><input id="produktkategori" readonly><br>
  <label>Ansvarskod:</label><input id="ansvarskod" readonly><br>
  <label>Verksamhetskod:</label><input id="verksamhetskod" readonly><br>
  <button id="slutforBtn">Slutför</button>

  <script>
    const params = new URLSearchParams(window.location.search);
    const beskrivning = decodeURIComponent(params.get("beskrivning") || "");

    const produktkategoriMatch = beskrivning.match(/Produktkategori:\s*(\d+)/i);
    const ansvarMatch = beskrivning.match(/Ansvarskod:\s*(\d+)/i);
    const verksamhetsMatch = beskrivning.match(/Verksamhetskod:\s*(\d+)/i);
    const mottagareMatch = beskrivning.match(/Mottagare:\s*([^\n;]+)/i);
    const adressMatch = beskrivning.match(/Leveransadress:\s*([^\n;]+)/i);
    const chefMatch = beskrivning.match(/Chef:\s*([^\n;]+)/i);

    const produktkategori = produktkategoriMatch ? produktkategoriMatch[1] : "";
    const ansvarskod = ansvarMatch ? ansvarMatch[1] : "";
    const verksamhetskod = verksamhetsMatch ? verksamhetsMatch[1] : "";
    const mottagare = mottagareMatch ? mottagareMatch[1] : "";
    const leveransadress = adressMatch ? adressMatch[1] : "";
    const chef = chefMatch ? chefMatch[1] : "";

    document.getElementById("produktkategori").value = produktkategori;
    document.getElementById("ansvarskod").value = ansvarskod;
    document.getElementById("verksamhetskod").value = verksamhetskod;

    document.getElementById("slutforBtn").addEventListener("click", () => {
      localStorage.setItem("mottagare", mottagare);
      localStorage.setItem("leveransadress", leveransadress);
      localStorage.setItem("chef", chef);
      localStorage.setItem("produktkategori", produktkategori);
      localStorage.setItem("ansvarskod", ansvarskod);
      localStorage.setItem("verksamhetskod", verksamhetskod);

      window.location.href = "bekrafta-bestallning.html?beskrivning=" + encodeURIComponent(beskrivning);

    });
  </script>

</body>
</html>



<
